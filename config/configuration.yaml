homeassistant:
  customize: !include customize.yaml
  auth_providers:
    - type: homeassistant
    - type: trusted_networks
      trusted_networks:
        - 192.168.240.0/24
        - 192.168.1.0/24
        - fd00::/8
    - type: legacy_api_password
      api_password: !secret http_password

# Show links to resources in log and frontend
# introduction: false

frontend:
  themes: !include_dir_merge_named themes

mobile_app:

logger:
  default: warning
  logs:
    homeassistant.components.recorder: warning
    paho.mqtt.client: warning
    homeassistant.components.mqtt: warning
    homeassistant.core: warning
    awesomeversion: warning
    homeassistant.components.yeelight: warning
    async_upnp_client.traffic.ssdp: warning
    homeassistant.components.wled: warning
    homeassistant.components.filter: warning
    yeelight.aio: warning
    aiohue.v2: warning
    aiohue.v2.events: warning
    zeroconf: warning
    # homeassistant.components.websocket_api.http.connection: warning

# Enables configuration UI
config:
system_health:
api:

lovelace:
  mode: storage

recorder:
   purge_keep_days: 5

http:
  # Secrets are defined in the file secrets.yaml
  # Uncomment this if you are using SSL/TLS, running in Docker container, etc.
  # base_url: example.duckdns.org:8123
  use_x_forwarded_for: true
  trusted_proxies:
  - 172.18.0.0/16
  - 172.19.0.0/16
  - 172.20.0.0/16
  - 172.21.0.0/16
  - 192.168.240.1

# Checks for available updates
# Note: This component will send some information about your system to
# the developers to assist with development of Home Assistant.
# For more information, please see:
# https://home-assistant.io/blog/2016/10/25/explaining-the-updater/
updater:

binary_sensor:
  - platform: template
    sensors:
      is_nico_at_home:
        value_template: >-
          {%- if 
          states('binary_sensor.nic_s_pixel_kitchen_ibeacon_backwards') == 'on' or
          states('binary_sensor.nic_s_pixel_vicks_ibeacon_backwards') == 'on' or
          states('binary_sensor.nic_s_pixel_bedroom_ibeacon_backwards') == 'on' or
          states('binary_sensor.nic_s_pixel_office_ibeacon_backwards') == 'on' or
          states('binary_sensor.nic_s_pixel_printer_ibeacon_backwards') == 'on'
          -%}
          on
          {%- else -%}
          off
          {%- endif  %}
  - platform: template
    sensors:
      is_vick_at_home:
        value_template: >-
          {%- if 
          states('binary_sensor.vick_s_velvet_kitchen_ibeacon_backwards') == 'on' or
          states('binary_sensor.vick_s_velvet_vicks_ibeacon_backwards') == 'on' or
          states('binary_sensor.vick_s_velvet_bedroom_ibeacon_backwards') == 'on' or
          states('binary_sensor.vick_s_velvet_printer_ibeacon_backwards') == 'on'
          -%}
          on
          {%- else -%}
          off
          {%- endif  %}          
  - platform: template
    sensors:
      is_someone_at_home:
        value_template: >-
          {%- if 
          states('binary_sensor.is_vick_at_home') == 'on' or
          states('binary_sensor.is_nico_at_home') == 'on'
          -%}
          on
          {%- else -%}
          off
          {%- endif  %}

conversation: # Allows you to issue voice commands from the frontend in enabled browsers
history: # Enables support for tracking state changes over time
logbook: # View all events in a logbook
  include:
    domains:
    - automation
    - climate
    - input_number

map: # Enables a map showing the location of tracked devices
sun: # Track the sun
cloud:
tts: # Text to speech
  - platform: google_translate


discovery:
weather: !include weather.yaml
camera: !include camera.yaml
scene: !include scenes.yaml
script: !include scripts.yaml
sensor: !include sensors.yaml
group: !include groups.yaml
automation: !include automations.yaml
timer: !include timers.yaml
device_tracker: !include device_trackers.yaml
climate: !include climate.yaml
rest_command: !include rest_commands.yaml
light: !include lights.yaml
zone: !include zones.yaml

input_text:
  current_scene:
    name: Current Scene
input_number:
  living_temperature_slider:
    name: Living Slider °C
    initial: 18
    min: 17
    max: 25
    step: .5
  office_temperature_slider:
    name: Office Slider °C
    initial: 18
    min: 17
    max: 25
    step: .5
  home_alone_temperature_slider:
    name: Home Alone Temp
    initial: 17
    min: 16
    max: 25
    step: .5
  at_home_temperature_slider:
    name: Welcoming Temp
    initial: 20
    min: 17
    max: 25
    step: .5
  at_home_sleeping:
    name: During the night
    initial: 18
    min: 17
    max: 25
    step: .5
  main_room_temperature:
    name: Main Room Temperature
    initial: 21
    min: 17
    max: 25
    step: .5
  wled01_speed:
    name: WLED 01 Speed
    initial: 127
    min: 0
    max: 255
    step: 1
  wled01_intensity:
    name: WLED 01 Intensity
    initial: 127
    min: 0
    max: 255
    step: 1
  ir_light_level:
    name: IR Light Level
    initial: 5
    max: 7
    min: 0
    step: 1

yeelight: !include yeelight.yaml
